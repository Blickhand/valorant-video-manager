<!DOCTYPE html>
<html class="dark" lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>无畏契约精彩时刻编辑器</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;family=Noto+Sans+SC:wght@300;400;500;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#ff4757",
                        "primary-hover": "#ff2f42",
                        "background-light": "#f8f5f6",
                        "background-dark": "#0f1923",
                        "surface-dark": "#1f2731",
                        "surface-lighter": "#2c3540",
                        "border-dark": "#36414d"
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "Noto Sans SC", "sans-serif"],
                        "body": ["Noto Sans SC", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "4px",
                        "lg": "6px",
                        "xl": "8px",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        /* 原生桌面体验：禁止文本选择 */
        body {
            user-select: none;
            -webkit-user-select: none;
        }

        /* 输入框例外：允许文本选择和编辑 */
        input,
        textarea {
            user-select: text;
            -webkit-user-select: text;
        }

        /* 禁止图片拖拽 */
        img {
            -webkit-user-drag: none;
            pointer-events: auto;
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #1f2731;
        }

        ::-webkit-scrollbar-thumb {
            background: #36414d;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #ff4757;
        }

        .waveform-bar {
            width: 3px;
            background-color: #36414d;
            border-radius: 1px;
        }

        .waveform-bar.active {
            background-color: #ff4757;
        }
    </style>
</head>

<body
    class="bg-background-dark text-white font-display h-screen flex flex-col overflow-hidden selection:bg-primary selection:text-white">
    <!-- Toast 通知容器 -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 flex flex-col gap-2"></div>

    <header
        class="flex items-center justify-between whitespace-nowrap border-b border-border-dark bg-surface-dark px-6 py-3 shrink-0 z-20">
        <div class="flex items-center gap-4 text-white">
            <div class="size-8 flex items-center justify-center bg-primary rounded">
                <span class="material-symbols-outlined text-white" style="font-size: 20px;">videocam</span>
            </div>
            <div>
                <h2 class="text-white text-lg font-bold leading-tight tracking-tight uppercase">无畏契约精彩时刻</h2>
                <p class="text-gray-400 text-xs font-normal">编辑器 - 加载中...</p>
            </div>
        </div>
        <!-- HOME 图标已移除 -->
    </header>
    <main class="flex-1 flex overflow-hidden">
        <!-- 左侧面板：标签 -->
        <aside class="w-80 flex flex-col border-r border-border-dark bg-surface-dark shrink-0">
            <div class="p-5 border-b border-border-dark">
                <h3 class="text-white text-lg font-bold leading-tight flex items-center gap-2 mb-1">
                    <span class="material-symbols-outlined text-primary text-xl">label</span>
                    快速标记
                </h3>
                <p class="text-gray-400 text-xs">点击按钮切换标签状态</p>
            </div>
            <div class="flex-1 overflow-y-auto p-5 space-y-5">
                <!-- 标签（动态加载预设标签） -->
                <div>
                    <h4 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-3">标签</h4>
                    <!-- 动态渲染预设标签 -->
                    <div id="preset-tags-container" class="grid grid-cols-2 gap-2 mb-3">
                        <!-- 将由 app.js 动态渲染 -->
                    </div>
                    <!-- 自定义标签容器 -->
                    <div id="custom-tags-container" class="grid grid-cols-2 gap-2 mb-3">
                    </div>
                    <!-- 自定义标签输入 -->
                    <div class="flex w-full items-stretch rounded">
                        <input id="custom-tag-input"
                            class="flex-1 bg-surface-lighter border border-border-dark text-white text-sm px-3 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary rounded-l placeholder-gray-500"
                            placeholder="自定义标签..." onkeypress="if(event.key==='Enter')addCustomTag()" />
                        <button onclick="addCustomTag()"
                            class="bg-surface-lighter border border-l-0 border-border-dark px-3 rounded-r hover:bg-border-dark hover:text-primary transition-colors">
                            <span class="material-symbols-outlined text-xl">add</span>
                        </button>
                    </div>
                </div>
                <!-- 特工选择 -->
                <div>
                    <h4 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-3">特工</h4>
                    <div class="space-y-3">
                        <!-- 先锋 -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-1 h-3 bg-primary rounded-full"></div>
                                <h5 class="text-[11px] font-bold text-gray-400">先锋</h5>
                            </div>
                            <div class="grid grid-cols-4 gap-1.5">
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="钛狐" onclick="selectAgent('钛狐')">钛狐</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="铁臂" onclick="selectAgent('铁臂')">铁臂</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="猎枭" onclick="selectAgent('猎枭')">猎枭</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="斯凯" onclick="selectAgent('斯凯')">斯凯</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="K/O" onclick="selectAgent('K/O')">K/O</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="黑梦" onclick="selectAgent('黑梦')">黑梦</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="盖可" onclick="selectAgent('盖可')">盖可</button>
                            </div>
                        </div>
                        <!-- 决斗 -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-1 h-3 bg-primary rounded-full"></div>
                                <h5 class="text-[11px] font-bold text-gray-400">决斗</h5>
                            </div>
                            <div class="grid grid-cols-4 gap-1.5">
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="捷风" onclick="selectAgent('捷风')">捷风</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="雷兹" onclick="selectAgent('雷兹')">雷兹</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="不死鸟" onclick="selectAgent('不死鸟')">不死鸟</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="芮娜" onclick="selectAgent('芮娜')">芮娜</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="夜露" onclick="selectAgent('夜露')">夜露</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="霓虹" onclick="selectAgent('霓虹')">霓虹</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="壹决" onclick="selectAgent('壹决')">壹决</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="幻棱" onclick="selectAgent('幻棱')">幻棱</button>
                            </div>
                        </div>
                        <!-- 控场 -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-1 h-3 bg-primary rounded-full"></div>
                                <h5 class="text-[11px] font-bold text-gray-400">控场</h5>
                            </div>
                            <div class="grid grid-cols-4 gap-1.5">
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="幽影" onclick="selectAgent('幽影')">幽影</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="炼狱" onclick="selectAgent('炼狱')">炼狱</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="蝰蛇" onclick="selectAgent('蝰蛇')">蝰蛇</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="星礈" onclick="selectAgent('星礈')">星礈</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="海神" onclick="selectAgent('海神')">海神</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="暮蝶" onclick="selectAgent('暮蝶')">暮蝶</button>
                            </div>
                        </div>
                        <!-- 哨卫 -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-1 h-3 bg-primary rounded-full"></div>
                                <h5 class="text-[11px] font-bold text-gray-400">哨卫</h5>
                            </div>
                            <div class="grid grid-cols-4 gap-1.5">
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="贤者" onclick="selectAgent('贤者')">贤者</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="零" onclick="selectAgent('零')">零</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="奇乐" onclick="selectAgent('奇乐')">奇乐</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="尚勃勒" onclick="selectAgent('尚勃勒')">尚勃勒</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="钢锁" onclick="selectAgent('钢锁')">钢锁</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="维斯" onclick="selectAgent('维斯')">维斯</button>
                                <button
                                    class="agent-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-agent="禁灭" onclick="selectAgent('禁灭')">禁灭</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 枪械选择 -->
                <div>
                    <h4 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-3">枪械</h4>
                    <div class="space-y-3">
                        <!-- 手枪 -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-1 h-3 bg-yellow-500 rounded-full"></div>
                                <h5 class="text-[11px] font-bold text-gray-400">手枪</h5>
                            </div>
                            <div class="grid grid-cols-3 gap-1.5">
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="标配" onclick="selectWeapon('标配')">标配</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="短炮" onclick="selectWeapon('短炮')">短炮</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="狂怒" onclick="selectWeapon('狂怒')">狂怒</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="鬼魅" onclick="selectWeapon('鬼魅')">鬼魅</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="追猎" onclick="selectWeapon('追猎')">追猎</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="正义" onclick="selectWeapon('正义')">正义</button>
                            </div>
                        </div>
                        <!-- 冲锋枪 -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-1 h-3 bg-green-500 rounded-full"></div>
                                <h5 class="text-[11px] font-bold text-gray-400">冲锋枪</h5>
                            </div>
                            <div class="grid grid-cols-3 gap-1.5">
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="蜂刺" onclick="selectWeapon('蜂刺')">蜂刺</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="骇灵" onclick="selectWeapon('骇灵')">骇灵</button>
                            </div>
                        </div>
                        <!-- 霰弹枪 -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-1 h-3 bg-orange-500 rounded-full"></div>
                                <h5 class="text-[11px] font-bold text-gray-400">霰弹枪</h5>
                            </div>
                            <div class="grid grid-cols-3 gap-1.5">
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="雄鹿" onclick="selectWeapon('雄鹿')">雄鹿</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="判官" onclick="selectWeapon('判官')">判官</button>
                            </div>
                        </div>
                        <!-- 步枪 -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-1 h-3 bg-blue-500 rounded-full"></div>
                                <h5 class="text-[11px] font-bold text-gray-400">步枪</h5>
                            </div>
                            <div class="grid grid-cols-4 gap-1.5">
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="獠犬" onclick="selectWeapon('獠犬')">獠犬</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="戍卫" onclick="selectWeapon('戍卫')">戍卫</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="幻影" onclick="selectWeapon('幻影')">幻影</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="狂徒" onclick="selectWeapon('狂徒')">狂徒</button>
                            </div>
                        </div>
                        <!-- 狙击枪 -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-1 h-3 bg-purple-500 rounded-full"></div>
                                <h5 class="text-[11px] font-bold text-gray-400">狙击枪</h5>
                            </div>
                            <div class="grid grid-cols-3 gap-1.5">
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="飞将" onclick="selectWeapon('飞将')">飞将</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="莽侠" onclick="selectWeapon('莽侠')">莽侠</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="冥驹" onclick="selectWeapon('冥驹')">冥驹</button>
                            </div>
                        </div>
                        <!-- 机枪 -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-1 h-3 bg-red-500 rounded-full"></div>
                                <h5 class="text-[11px] font-bold text-gray-400">机枪</h5>
                            </div>
                            <div class="grid grid-cols-3 gap-1.5">
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="战神" onclick="selectWeapon('战神')">战神</button>
                                <button
                                    class="weapon-btn px-1 py-2 rounded bg-surface-lighter hover:bg-border-dark hover:text-primary hover:border-primary/50 text-xs font-medium cursor-pointer border border-transparent transition-all truncate text-center"
                                    data-weapon="奥丁" onclick="selectWeapon('奥丁')">奥丁</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- 中间：视频播放器和时间线 -->
        <section class="flex-1 flex flex-col bg-background-dark relative min-w-0">
            <div class="flex-1 flex flex-col p-6 min-h-0">
                <!-- 视频播放器 -->
                <div
                    class="w-full aspect-video bg-black rounded-lg overflow-hidden relative shadow-2xl ring-1 ring-border-dark group">
                    <video id="video-player" class="w-full h-full object-contain" preload="metadata">
                        您的浏览器不支持视频播放
                    </video>
                    <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                        <div id="play-overlay"
                            class="size-16 rounded-full bg-black/50 backdrop-blur-sm flex items-center justify-center border border-white/10 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer pointer-events-auto"
                            onclick="togglePlay()">
                            <span class="material-symbols-outlined text-white text-4xl">play_arrow</span>
                        </div>
                    </div>
                    <div
                        class="absolute top-4 right-4 bg-black/60 backdrop-blur px-2 py-1 rounded text-xs font-mono text-white border border-white/10">
                        <span id="header-current-time">0:00</span> / <span id="header-duration">0:00</span>
                    </div>
                </div>
                <!-- 时间线 -->
                <div class="mt-6 flex flex-col gap-2">
                    <div class="flex justify-between items-end px-1">
                        <span id="start-time-display" class="text-xs font-mono text-gray-400">00:00.00</span>
                        <span id="end-time-display" class="text-xs font-mono text-gray-400">00:00.00</span>
                    </div>
                    <div id="timeline-container"
                        class="relative h-20 bg-surface-dark border border-border-dark rounded select-none group cursor-pointer overflow-hidden">
                        <!-- 波形可视化 -->
                        <div class="absolute inset-0 flex items-center justify-between px-2 opacity-30">
                            <div class="waveform-bar h-4"></div>
                            <div class="waveform-bar h-8"></div>
                            <div class="waveform-bar h-5"></div>
                            <div class="waveform-bar h-10"></div>
                            <div class="waveform-bar h-6 active"></div>
                            <div class="waveform-bar h-12 active"></div>
                            <div class="waveform-bar h-14 active"></div>
                            <div class="waveform-bar h-8 active"></div>
                            <div class="waveform-bar h-3 active"></div>
                            <div class="waveform-bar h-7 active"></div>
                            <div class="waveform-bar h-16 active"></div>
                            <div class="waveform-bar h-10 active"></div>
                            <div class="waveform-bar h-5 active"></div>
                            <div class="waveform-bar h-9 active"></div>
                            <div class="waveform-bar h-12 active"></div>
                            <div class="waveform-bar h-6 active"></div>
                            <div class="waveform-bar h-8 active"></div>
                            <div class="waveform-bar h-14 active"></div>
                            <div class="waveform-bar h-10 active"></div>
                            <div class="waveform-bar h-4 active"></div>
                            <div class="waveform-bar h-6 active"></div>
                            <div class="waveform-bar h-12 active"></div>
                            <div class="waveform-bar h-8 active"></div>
                            <div class="waveform-bar h-3 active"></div>
                            <div class="waveform-bar h-5 active"></div>
                            <div class="waveform-bar h-10 active"></div>
                            <div class="waveform-bar h-14 active"></div>
                            <div class="waveform-bar h-7 active"></div>
                            <div class="waveform-bar h-4"></div>
                            <div class="waveform-bar h-9"></div>
                            <div class="waveform-bar h-6"></div>
                            <div class="waveform-bar h-3"></div>
                            <div class="waveform-bar h-4"></div>
                            <div class="waveform-bar h-8"></div>
                            <div class="waveform-bar h-5"></div>
                            <div class="waveform-bar h-2"></div>
                            <div class="waveform-bar h-5 active"></div>
                            <div class="waveform-bar h-9 active"></div>
                            <div class="waveform-bar h-12 active"></div>
                            <div class="waveform-bar h-6 active"></div>
                            <div class="waveform-bar h-8 active"></div>
                            <div class="waveform-bar h-14 active"></div>
                            <div class="waveform-bar h-10 active"></div>
                            <div class="waveform-bar h-4 active"></div>
                            <div class="waveform-bar h-6 active"></div>
                            <div class="waveform-bar h-12 active"></div>
                            <div class="waveform-bar h-8 active"></div>
                            <div class="waveform-bar h-3 active"></div>
                            <div class="waveform-bar h-6 active"></div>
                            <div class="waveform-bar h-12 active"></div>
                            <div class="waveform-bar h-8 active"></div>
                            <div class="waveform-bar h-3 active"></div>
                            <div class="waveform-bar h-5 active"></div>
                            <div class="waveform-bar h-10 active"></div>
                            <div class="waveform-bar h-14 active"></div>
                            <div class="waveform-bar h-7 active"></div>
                            <div class="waveform-bar h-4"></div>
                            <div class="waveform-bar h-9"></div>
                            <div class="waveform-bar h-6"></div>
                            <div class="waveform-bar h-3"></div>
                            <div class="waveform-bar h-4"></div>
                            <div class="waveform-bar h-8"></div>
                            <div class="waveform-bar h-5"></div>
                            <div class="waveform-bar h-2"></div>
                        </div>
                        <!-- 选择范围 -->
                        <div id="timeline-range"
                            class="absolute top-0 bottom-0 left-[0%] right-[0%] bg-primary/20 border-x-2 border-primary z-10 flex flex-col justify-between group/range">
                            <div id="timeline-handle-start"
                                class="absolute -left-[9px] bottom-0 top-0 w-4 cursor-ew-resize flex items-center justify-center group-hover/range:opacity-100 opacity-80">
                                <div class="h-8 w-1.5 bg-primary rounded-full shadow-lg"></div>
                                <div
                                    class="absolute top-1 -left-1 bg-primary text-[10px] text-white px-1 rounded opacity-0 group-hover/range:opacity-100 font-mono">
                                    开始</div>
                            </div>
                            <div id="timeline-handle-end"
                                class="absolute -right-[9px] bottom-0 top-0 w-4 cursor-ew-resize flex items-center justify-center group-hover/range:opacity-100 opacity-80">
                                <div class="h-8 w-1.5 bg-primary rounded-full shadow-lg"></div>
                                <div
                                    class="absolute bottom-1 -right-1 bg-primary text-[10px] text-white px-1 rounded opacity-0 group-hover/range:opacity-100 font-mono">
                                    结束</div>
                            </div>
                        </div>
                        <!-- 播放头 -->
                        <div id="playhead"
                            class="absolute top-0 bottom-0 left-[0%] w-0.5 bg-white z-20 pointer-events-none shadow-[0_0_10px_rgba(255,255,255,0.5)]">
                            <div class="absolute -top-1 -left-[5px] size-3 rotate-45 bg-white rounded-sm"></div>
                        </div>
                    </div>
                    <!-- 播放控制 -->
                    <div class="flex justify-between items-center mt-2">
                        <div class="flex items-center gap-4">
                            <div class="flex items-center gap-1">
                                <button onclick="skipPrev()"
                                    class="text-gray-400 hover:text-white p-1 rounded hover:bg-surface-lighter"><span
                                        class="material-symbols-outlined">skip_previous</span></button>
                                <button id="play-btn" onclick="togglePlay()"
                                    class="text-white hover:text-primary p-2 rounded-full bg-surface-lighter hover:bg-surface-light border border-border-dark"><span
                                        class="material-symbols-outlined fill">play_arrow</span></button>
                                <button onclick="skipNext()"
                                    class="text-gray-400 hover:text-white p-1 rounded hover:bg-surface-lighter"><span
                                        class="material-symbols-outlined">skip_next</span></button>
                            </div>
                            <span class="text-sm font-mono text-gray-400"><span id="current-time-display">0:00</span>
                                <span class="text-gray-600">/</span> <span id="duration-display">0:00</span></span>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="relative">
                                <button onclick="toggleSpeedMenu()"
                                    class="flex items-center gap-1 px-3 py-1.5 rounded bg-surface-lighter border border-border-dark text-xs font-mono hover:border-primary transition-colors">
                                    <span id="speed-display">1.0x</span>
                                    <span class="material-symbols-outlined text-sm">expand_more</span>
                                </button>
                                <div id="speed-menu"
                                    class="hidden absolute bottom-full mb-2 right-0 bg-surface-dark border border-border-dark rounded-lg shadow-xl overflow-hidden z-50">
                                    <button onclick="setPlaybackSpeed(0.5)"
                                        class="block w-full px-4 py-2 text-xs font-mono text-left hover:bg-surface-lighter">0.5x</button>
                                    <button onclick="setPlaybackSpeed(0.75)"
                                        class="block w-full px-4 py-2 text-xs font-mono text-left hover:bg-surface-lighter">0.75x</button>
                                    <button onclick="setPlaybackSpeed(1.0)"
                                        class="block w-full px-4 py-2 text-xs font-mono text-left hover:bg-surface-lighter bg-primary/20 text-primary">1.0x</button>
                                    <button onclick="setPlaybackSpeed(1.25)"
                                        class="block w-full px-4 py-2 text-xs font-mono text-left hover:bg-surface-lighter">1.25x</button>
                                    <button onclick="setPlaybackSpeed(1.5)"
                                        class="block w-full px-4 py-2 text-xs font-mono text-left hover:bg-surface-lighter">1.5x</button>
                                    <button onclick="setPlaybackSpeed(2.0)"
                                        class="block w-full px-4 py-2 text-xs font-mono text-left hover:bg-surface-lighter">2.0x</button>
                                </div>
                            </div>
                            <div class="h-4 w-px bg-border-dark"></div>
                            <div class="flex items-center gap-2 group/volume">
                                <button id="volume-btn" onclick="toggleMute()"
                                    class="text-gray-400 hover:text-white"><span
                                        class="material-symbols-outlined">volume_up</span></button>
                                <input id="volume-slider" type="range" min="0" max="100" value="100"
                                    class="w-20 h-1 bg-border-dark rounded-lg appearance-none cursor-pointer opacity-0 group-hover/volume:opacity-100 transition-opacity [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full">
                            </div>
                            <button onclick="toggleFullscreen()" class="text-gray-400 hover:text-white"><span
                                    class="material-symbols-outlined">fullscreen</span></button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 底部操作按钮 -->
            <div class="border-t border-border-dark bg-surface-dark p-6 mt-auto">
                <div class="flex justify-between items-center">
                    <button id="discard-btn" onclick="discardEditing()"
                        class="px-6 py-3 rounded text-sm font-bold text-gray-400 hover:text-white hover:bg-surface-lighter transition-colors">
                        放弃
                    </button>
                    <div class="flex gap-3">
                        <button id="next-btn" onclick="nextVideo()"
                            class="px-6 py-3 rounded border border-border-dark bg-surface-lighter text-white text-sm font-bold hover:bg-border-dark hover:border-gray-500 transition-all">
                            下一个
                        </button>
                        <button id="save-btn" onclick="finishAndSave()"
                            class="px-8 py-3 rounded bg-primary text-white text-sm font-bold shadow-lg shadow-primary/30 hover:bg-primary-hover hover:shadow-primary/50 hover:-translate-y-0.5 transition-all flex items-center gap-2">
                            <span class="material-symbols-outlined">save</span>
                            完成并保存标记
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 右侧面板：文件列表 -->
        <aside class="w-72 flex flex-col border-l border-border-dark bg-surface-dark shrink-0">
            <div class="p-5 border-b border-border-dark flex justify-between items-center">
                <h3 class="text-white text-lg font-bold leading-tight">当前文件夹</h3>
                <span id="file-count" class="text-xs text-primary font-mono bg-primary/10 px-2 py-1 rounded">0/0</span>
            </div>
            <div id="file-list" class="flex-1 overflow-y-auto p-2 space-y-2">
            </div>
            <div class="p-3 border-t border-border-dark bg-surface-dark">
                <!-- 返回主页按钮：有未保存内容时会触发确认对话框 -->
                <button onclick="goToHome()"
                    class="w-full py-2 rounded border border-dashed border-gray-600 text-gray-400 text-xs hover:border-primary hover:text-primary transition-colors flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined text-base">folder_open</span>
                    返回到主页
                </button>
            </div>
        </aside>
    </main>

    <script src="app.js"></script>
</body>

</html>